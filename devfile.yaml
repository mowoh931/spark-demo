schemaVersion: 2.2.0
metadata:
  name: spark-demo
  version: 1.0.0
  description: Devfile for deploying Spark Demo application on OpenShift
components:
  - name: spark-demo-image
    image:
      imageName: mowoh/spark-demo:latest
      dockerfile:
        uri: ./Dockerfile
      autoBuild: true
  - name: spark-demo
    container:
      image: mowoh/spark-demo:latest
      env:
        - name: JAVA_HOME
          value: /usr/lib/jvm/java-11-openjdk
      mountSources: true
      endpoints:
        - name: web
          targetPort: 8080
commands:
  - id: build-image
    apply:
      component: spark-demo-image
  - id: deploy-app
    apply:
      component: kubernetes-deploy
